var o,e,priceAuto,autoFrameAnim,autoHoverAnim,nextOffer=0,currentScreen=0,oldScreenY=-1,currentScreenOffers=[],gallery={enabled:!1},planche={enabled:!1},enlarger={enabled:!1},multiscreen={enabled:!1},choosen=[],banner={flags:{displayPrice:!0,mouseOnBanner:!1,theEnd:!1,dontShowArrows:!1,dontChangeOffer:!1,arrowsVisible:!1},options:{offersCount:null,infiniteAnimAllowed:!0,offerRibbonAlways:!1,offerPriceEnabled:!0,logoAnimInterval:3e3,logoAnimFadeSpeed:1e3,maxAnimTime:24e3,supportTransition:!0,enlargerAnimEnabled:!1,initHoverAnim:!0,hoverAnimInterval:1e3,offersWithOldPrice:[],screensMargin:15,logoGIFanimation:"false"},elements:{},init:function(n){this.checkOffers(),banner.options=$.extend(banner.options,n),o=banner.options,o.arrowsEnabled="true"===o.arrowsEnabled.toLowerCase(),o.logoGIFanimation="true"===o.logoGIFanimation.toLowerCase(),banner.checkTransitionSupport(),banner.cacheElem(),banner.initStandardOpt(),e.banner.fadeIn(function(){banner.offerPriceAnim.start()}),$("body").anim({opacity:1},{duration:500}),e.allOffers.css("top","0px"),banner.flags.arrowsVisible&&multiscreen.enabled&&multiscreen.arrowActions.disableInactive()},bindUIActions:function(){e.offer.on("mouseenter, mouseover",function(e){var n=$(this).data("id");nextOffer=n===o.offersCount-1?0:n+1,o.initHoverAnim?banner.hoverAnim.stop():banner.frameAnim.stop(),e.preventDefault()}),e.offerHover.on("mouseenter, mouseover",function(e){banner.flags.mouseOnBanner=!0,o.initHoverAnim?banner.hoverAnim.stop():banner.frameAnim.stop(),e.preventDefault()}),e.banner.on("mouseenter",function(e){banner.flags.mouseOnBanner=!0,multiscreen.enabled&&multiscreen.arrowActions.visibility()}),e.banner.on("mouseleave",function(n){return banner.flags.mouseOnBanner=!1,multiscreen.enabled&&multiscreen.arrowActions.visibility(),banner.flags.theEnd?void banner.offerPriceAnim.hideOldPrice():void(e.banner.hasClass("hover-anim")||(o.initHoverAnim?banner.hoverAnim.start():banner.frameAnim.start(),n.preventDefault()))})},checkOffers:function(){var e=[],n=this;$.each(offers,function(n,r){r.oldPrice.length&&e.push({idx:n,el:r})}),$.each(e,function(e,r){n.options.offersWithOldPrice.push(".offer-price-container:eq("+r.idx+")")}),n.options.offersWithOldPrice=n.options.offersWithOldPrice.join(",")},initStandardOpt:function(){banner.screenOffers=o.screenOffers.split(","),banner.screensCount=banner.screenOffers.length;for(var n=0,r=0;r<=banner.screensCount;r++)currentScreenOffers[r]=banner.screenOffers[r]-n,n=banner.screenOffers[r];e.logoContainer.first().css("display","inline-block"),o.containerHeight+=o.screensMargin,e.logoContainer.length>1&&!o.logoGIFanimation&&this.logoAnim.start(e.logoContainer),o.infiniteAnimAllowed||setTimeout(function(){banner.flags.theEnd="false"===o.animAgain.toLowerCase(),$(".offer-oldprice-container").css("display","none"),$(banner.options.offersWithOldPrice).css("display","inline-block"),banner.logoAnim.stop(e.logoContainer),banner.hoverAnim.stop(),banner.frameAnim.stop(),banner.flags.theEnd||banner.offerPriceAnim.stop(),planche.enabled&&!banner.flags.mouseOnBanner&&(planche.plancheAnim.hide(),clearTimeout(planche.autoShowTimeout)),enlarger.enabled&&!banner.flags.mouseOnBanner&&(enlarger.clearAllTimeout(),enlarger.enlargerAnim.hide()),gallery.enabled&&gallery.galleryAnim.stop(),!banner.flags.mouseOnBanner&&multiscreen.enabled&&multiscreen.checkScreen(0)},o.maxAnimTime),o.offerRibbonAlways&&this.showElem($("div.offer-ribbon-container, div.offer-enlarger-ribbon-container")),o.offerPriceEnabled||(this.hideElem($("div.offer-enlarger-price-container")),this.hideElem($("div.offer-oldprice-container, div.offer-price-container"))),o.supportTransition?$.fn.anim=$.fn.transit:$.fn.anim=$.fn.animate,o.enlargerAnimEnabled||"none"==String(o.creativeBannerTrmplateAnimationType).toLowerCase()||(gallery.enabled?(gallery.bindGalleryUIActions(),gallery.showGallery(o.offersCount-1,0),gallery.galleryAnim.start()):o.initHoverAnim?(banner.bindUIActions(),banner.hoverAnim.start()):(banner.bindUIActions(),banner.frameAnim.start())),multiscreen.enabled&&multiscreen.arrowActions.init()},offerPriceAnim:{start:function(){return priceAuto=setTimeout("banner.offerPriceAnim.start()",1e3),banner.flags.theEnd&&!banner.flags.mouseOnBanner?void banner.offerPriceAnim.hideOldPrice():($(banner.options.offersWithOldPrice).css("display",banner.flags.displayPrice?"inline-block":"none"),$(".offer-oldprice-container").css("display",banner.flags.displayPrice?"none":"inline-block"),void(banner.flags.displayPrice=!banner.flags.displayPrice))},stop:function(){clearTimeout(priceAuto),banner.offerPriceAnim.hideOldPrice()},hideOldPrice:function(){$(".offer-oldprice-container").css("display","none"),$(banner.options.offersWithOldPrice).css("display","inline-block"),banner.flags.displayPrice=!1}},cacheElem:function(){this.elements={banner:$("#banner-container"),logoContainer:$("#logo-container .logo-box"),offer:$(".offer-container"),offerHover:$(".offer-hover-container"),offerBtn:$(".offer-button-wrapper"),offerName:$(".offer-name-container"),allOffers:$("#alloffers-container-relative"),arrowUp:$(".nav.up"),arrowUpBlock:$("#up-block"),arrowDownBlock:$("#down-block"),arrowDown:$(".nav.down"),arrows:$("#arrows-container"),allContainer:$("#alloffers-container"),gallery:$("#galImglery-zoom")},e=this.elements},showElem:function(e){e.addClass("show").css("display","inline-block")},hideElem:function(e){e.addClass("hide").css("display","none")},checkTransitionSupport:function(){var e=document.body||document.documentElement,n=e.style,r=void 0!==n.transition||void 0!==n.WebkitTransition||void 0!==n.MozTransition||void 0!==n.MsTransition||void 0!==n.OTransition;o.supportTransition=r},logoAnim:{idx:0,timeout:null,start:function(e){$(e[banner.logoAnim.idx]).fadeIn(o.logoAnimFadeSpeed,function(){banner.logoAnim.idx=banner.logoAnim.idx<e.length-1?banner.logoAnim.idx+1:0,banner.logoAnim.timeout=setTimeout(function(){e.fadeOut(o.logoAnimFadeSpeed),banner.logoAnim.start(e)},o.logoAnimInterval)})},stop:function(e){o.logoGIFanimation?2===e.length&&($(e[0]).fadeOut(),$(e[1]).fadeIn()):(e.clearQueue().stop(!0,!0).not($(e[0])).fadeOut(),e.first().fadeIn(o.logoAnimFadeSpeed),clearTimeout(banner.logoAnim.timeout))}},hoverAnim:{start:function(){e.banner.addClass("hover-anim"),autoHoverAnim=setTimeout(function(){multiscreen.enabled&&multiscreen.checkScreen(nextOffer),e.offerHover.css("display","none"),e.offerName.css("marginTop",""),e.offerBtn.css("display",""),$(e.offerHover[nextOffer]).css("display","inline-block"),$(e.offerName[nextOffer]).css("marginTop",0),$(e.offerBtn[nextOffer]).css("display","inline-block"),nextOffer=nextOffer===o.offersCount-1?0:nextOffer+1,banner.hoverAnim.start()},o.hoverAnimInterval)},stop:function(){e.banner.removeClass("hover-anim"),clearTimeout(autoHoverAnim),e.offerHover.css("display",""),e.offerBtn.css("display",""),e.offerName.css("marginTop","")}},frameAnim:{start:function(){0!==o.offersCount&&(e.banner.addClass("hover-anim"),autoFrameAnim=setTimeout(function(){multiscreen.enabled&&multiscreen.checkScreen(nextOffer),e.offer.find(".absoluteBorder").remove(),e.offer.css("border-color",""),$(e.offer[nextOffer]).append('<div class="absoluteBorder" style="position:absolute; z-index:1000; top:0px; left:0px; width:100%; height:100%; border:1px solid '+o.initFrameAnimColor+'"><div>'),$(e.offer[nextOffer]).css("border-color",o.initFrameAnimColor),nextOffer=nextOffer===o.offersCount-1?0:nextOffer+1,banner.frameAnim.start()},banner.screensCount>1?o.hoverAnimInterval/currentScreenOffers[currentScreen]*3:o.hoverAnimInterval))},stop:function(){e.banner.removeClass("hover-anim"),e.offer.find(".absoluteBorder").remove(),e.offer.css("border-color",""),clearTimeout(autoFrameAnim)}}};